<!DOCTYPE html>
<html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="reversenorm.github.io/Javascript/ToggleVisibility.js"></script>


<head>
    <title>Behance Loader</title>
<style>

	body{
		overflow:auto;
	}

	#overlay {
	  position: fixed;
	  overflow:hidden;
	  top: 0px;
	  left: 0px;
	  z-index: 9;
	  background-color: rgba(0, 0, 0, .75);
	  width:101%;
	  height:101%;
	  display: none;
	}

	.closeOverlay{
		position: absolute;
		top:0px;
		left:0px;
		width:100%;
		height:100%;
		z-index:10;
		cursor:zoom-out;

	}

	.close_x{
		position:relative;
		float;right;
		top:-15px;
		right:-15px;

	}

	#behanceGallery {
	  position: relative;
	  width: 76%;
	  left:12%;
	  z-index: 20;
	  height:100%;
	  overflow:scroll;
	  background-color: #ffffff;
	  margin:20px;
	}

	#behanceGallery img{
		width:75%;
		height:auto;
	}

	#behanceGallery h1{
		text-align: center;
	}
	 #behanceGallery ul {
	 	list-style-type: none;
	 }

	 #behanceGallery li {
	 	margin:20px 0px 0px 0px;
	 }

	.glowEdges {
    border: solid rgba(200, 115, 15, .75);
     -webkit-box-shadow: 0px 0px 5px 2px rgba(255,100,0,0.5);
   -moz-box-shadow: 0px 0px 5px 2px rgba(255,100,0,0.5);
   box-shadow: 0px 0px 5px 2px rgba(255,100,0,0.5);

   border-width: 2px 1px 2px 1px;

}

	.galleryDescription{
		padding: 20px;
	}



</style>

</head>

<body>

    <script type="text/javascript">


        var BehanceProjects = jsonLoader("/BehanceJSON/jphillips01_projects.json");

   
        function jsonLoader(filePath){

			var BehanceData = (function () {
		    	var jason = null;
			   		 $.ajax({
				        'async': false,
				        'global': false,
				        'url':  filePath,
				        'dataType': "json",
				        'success': function (data) {
				            json = data;
			        }
			   		 });
			   		 	return json;
					})(); 

			return BehanceData;

		};//end json loader

		function bodyNoScroll(){
			document.body.style.overflow="hidden";
		}

		function openGallery(galleryId){
			toggleLayer('overlay');
			document.getElementById("behanceGallery").innerHTML=galleryBuilder(galleryId);
		};

		function galleryBuilder(galleryId){

			var galleryData=jsonLoader("/BehanceJSON/BehanceGallery/"+galleryId+".json");

			var htmlString="<div class='closex'><a href='#d' onclick='toggleLayer('overlay');'>[X]</a></div><div class='galleryDescription'>"//add in the gallery description section

			htmlString=htmlString.concat("<h1>"+galleryData["project"]["name"]+"</h1><br/>");//add gallery title

			if(galleryData["project"]["modules"][0]["type"]=="text"){
				htmlString=htmlString.concat(galleryData["project"]["modules"][0]["text"]+"<br/>");//add in description text from first module item if item is text.
			}

			htmlString=htmlString.concat("<a href='"+galleryData["project"]["url"]+"' target='_blank'>View on Behance.net</a>");//add in link to view on behance

			htmlString=htmlString.concat("</div><div class='viewWindow'>Left button <ul>");//close gallery description div and open viewWindow div. Also open UL for each image w/ description



			for(var i=0; i<galleryData["project"]["modules"].length; i++){ //for each module item
				if(galleryData["project"]["modules"][i]["type"]=="image"){//if it's an image
				htmlString = htmlString.concat("<li><img src='"+galleryData["project"]["modules"][i]["sizes"]["original"]+"' align='center'>");

					if(galleryData["project"]["modules"][i]["caption_plain"]){//if there is a caption

						htmlString = htmlString.concat("<br/>"+galleryData["project"]["modules"][i]["caption_plain"]+"</li>"); //then add caption to html inside list element

					}else{
						htmlString = htmlString.concat("</li>");//if no caption just close after the image
					}

				}else if(galleryData["project"]["modules"][i]["type"]=="video"){//if the file is a video instead

					htmlString = htmlString.concat("<li>"+galleryData["project"]["modules"][i]["embed"]);
					//add video embed link
					if(galleryData["project"]["modules"][i]["caption_plain"]){//if there is a caption

						htmlString = htmlString.concat("<br />"+galleryData["project"]["modules"][i]["caption_plain"]+"</li>"); //then add caption to html inside list element

					}else{
						htmlString = htmlString.concat("</li>");//if no caption just close after the image
					}
				}

			};
				htmlString = htmlString.concat("</ul><br/> Right button</div>");
				//close list and close viewWindow div
			return htmlString;

		};

    </script>
<br />
<br />

<!-- simple change test-->
<div >
	<ul id="projectsList">

		<script>
			for (var i=0; i<BehanceProjects["projects"].length; i++ ){
				document.write("<li><a href='#b' onclick='openGallery("+BehanceProjects["projects"][i]["id"]+");'><img src='"+BehanceProjects["projects"][i]["covers"][202]+"'><br/>"+BehanceProjects["projects"][i]["name"]+"</a></li>");
			};
		</script>

	</ul>
</div><br /><br />

<div id="overlay" >
	<a href="#c" onclick="toggleLayer('overlay'); bodyNoScroll();">
	<div class="closeMe"></div>
	</a>
	<div id="behanceGallery" class="glowEdges">Gallery data will go here using inner.html<br />

	Need to create a string that stiches html together then pass that string to inner.html to place here.
	</div>
</div>

</body>


</html>